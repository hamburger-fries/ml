---
import PageLayout from "../layouts/PageLayout.astro";
import Gallery from "../components/Gallery.astro";

interface Image {
  imgUrl: string;
  alt: string;
}

const imageFiles = [
  "1-1-Clinique_ChubbySticks_.jpg",
  "1-1-Clinique_lipsticks_w_berries_.jpg",
  "1-1-Clinique_Superprimer_tubes_.jpg",
  "1-1-clinique_tubes_w__bubbles_2_.jpg",
  "1-1-Cosmetics_24_.jpg",
  "1-2-clinique_tubes_in_wave_.jpg",
  "1-2-cosmetics_22_.jpg",
  "1-2-Cosmetics_23_.jpg",
  "1-cosmetics_21_.jpg",
  "1-w-Clinique_M_Lotion_PORT_.jpg",
  "1-x-Marathon_COS_spread_32_.jpg",
  "2-BC_Tint_Skin__2.jpg",
  "2-Blue_mu_crumbles_.jpg",
  "2-broken_pastels_as_face_.jpg",
  "2-cosmetics_17_.jpg",
  "2-cosmetics_40_.jpg",
  "2-cosmetics_51_.jpg",
  "2-cosmetics_PDF_intro_.jpg",
  "2-Lip_Shear_bullets_port_.jpg",
  "2-Lipstick_pieces_.jpg",
  "2-Marathon_COS_spread_15_.jpg",
  "2-mu_smears_23_ip2_.jpg",
  "2-mu_smears_reds.jpg",
  "2-P_pink_smear_.jpg",
  "2-P_shaved_soap_.jpg",
  "2-page_21_.jpg",
  "2-paint_port_.jpg",
  "2-paint_spots_1_.jpg",
  "2-Pantene_2_110572__2.jpg",
  "2-Pantene_2_110809_.jpg",
  "2-PANTENE_OIL+CREAM_B3_.jpg",
  "2-red_swipe_.jpg",
  "2-White_Lotion_smear_.jpg",
  "2-x-Bubble_globe_.jpg",
  "3-1-Marc_Jacobs_berries.jpg",
  "3-cos_5_.jpg",
  "3-Hourglass_Aa_.jpg",
  "3-Hourglass_lipstick_.jpg",
  "4-1-New_Port_image_7_.jpg",
  "4-1-page_03_.jpg",
  "4-Givenchy_logo_.jpg",
  "4-Marathon_COS_sd_.jpg",
  "4-Marathon_COS_spread_09_.jpg",
  "4-Marathon_COS_spread_31_.jpg",
  "5-cosmetics_47_.jpg",
  "5-Marathon_COS_spread_29_.jpg",
  "5-P_chanel_compact_.jpg",
  "5-P_shiseido_make-up.jpg",
  "5-Plaster_rounds_bg_.jpg",
  "6-Bulgari_bottle_.jpg",
  "6-cosmetics_63_.jpg",
  "6-Fahrenheit_.jpg",
  "6-P_ipsa_ad_.jpg",
  "6-P_shiseido_vocalise_.jpg",
  "7-1-cosmetics_59b_.jpg",
  "7-2-cosmetics_46_.jpg",
  "7-3-Paint_in_water_frame_3_.jpg",
  "7-3-Shiseido_White_Lucent_ip2_.jpg",
  "7-3-Turquiose_frame_ip3_.jpg",
  "7-4-Shiseido_Future_Solution_ip2_.jpg",
  "7-5-Shiseido_Bio_Performance_A_ip3_.jpg",
  "7-5-Shiseido_Bio_Performance_B_ip3_.jpg",
  "7-5-Shiseido_Ultimune_.jpg",
  "7-Shiseido_Bio_Performance_in_water_B_PORT_.jpg",
  "8-1-Nars_stacked_tubs_.jpg",
  "8-2-cosmetics_11_.jpg",
  "9-1-Pureology_1_.jpg",
  "9-1-Pureology_2_.jpg",
  "9-1-Pureology_3_ip2_.jpg",
  "9-2-Dove_DryOil_Shampoo_splash_.jpg",
  "9-3-Derma_DailySuperfoliant_2_112176_.jpg",
  "9-4-Dermalogica_Phyto_Grass_ip2_.jpg",
  "10-cosmetics_44_.jpg",
  "10-cosmetics_45_.jpg",
  "10-Marathon_COS_spread_24_.jpg",
  "10-y-BC_Dew_Skin_Test_.jpg",
  "w-Amore_Pacific_.jpg",
  "w-P_5S_brushes_.jpg",
  "x-Laura_Mercier_B_.jpg",
  "x-Laura_Mercier_ip2_.jpg",
  "x-Laura_Mrcier_flawless_skin_.jpg",
  "y-1-bc_d_.jpg",
  "y-1-Marathon_COS_spread_10_.jpg",
  "y-1-Marathon_COS_spread_26_.jpg",
  "y-07__BCounter_14_lip_gloss__.jpg",
  "y-BCounter_10_18818_ip6_.jpg",
  "y-BCounter_10_Baby_Box_ip2_.jpg",
  "y-BCounter_tint_skin_single_ip20_.jpg",
  "y-Beauty_Counter_492363_ip2_.jpg",
];

const images: Image[] = imageFiles.map((file) => ({
  imgUrl: `/images/photos/cosmetics/${file}`,
  alt: file
    .replace(/\.(jpg|jpeg|png|gif)$/i, "")
    .replace(/[_-]/g, " ")
    .replace(/\s+/g, " ")
    .trim(),
}));
---

<PageLayout title="Cosmetics" description="A gallery of cosmetics photographs">
  <div class="w-full max-w-screen-xl mx-auto px-4 mt-[60px]">
    <Gallery images={images} />
  </div>
</PageLayout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const images = document.querySelectorAll(".gallery-image");
    images.forEach((img, index) => {
      if (img instanceof HTMLImageElement) {
        img.addEventListener("error", function () {
          console.error(`Failed to load image ${index + 1}: ${this.src}`);
          this.src =
            "data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22100%22%20height%3D%22100%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22100%22%20height%3D%22100%22%20fill%3D%22%23eee%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2214%22%20fill%3D%22%23aaa%22%3EError%3C%2Ftext%3E%3C%2Fsvg%3E";
          this.alt = "Error loading image";
        });
        img.addEventListener("load", function () {
          console.log(`Successfully loaded image ${index + 1}: ${this.src}`);
        });
      }
    });
  });

  function checkImages() {
    const images = document.querySelectorAll(".gallery-image");
    images.forEach((img, index) => {
      if (img instanceof HTMLImageElement) {
        fetch(img.src)
          .then((response) => {
            if (!response.ok)
              throw new Error(`HTTP error! status: ${response.status}`);
            return response.blob();
          })
          .then(() => console.log(`Image ${index + 1} is accessible`))
          .catch((e) =>
            console.error(`Error with image ${index + 1}: ${e.message}`)
          );
      }
    });
  }

  setTimeout(checkImages, 2000);
</script>
